<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Formulario WhatsApp Compartible</title>

<style>
  /* --- Estilos generales del cuerpo de la p치gina --- */
  body { 
    font-family: Arial, sans-serif;
    background:#f2f2f2;
    padding:20px;
  }

  /* --- Centra el t칤tulo principal --- */
  h2 {
    text-align: center;
  }

  /* --- Contenedor del formulario --- */
  form { 
    background:#fff;
    padding:40px;
    border-radius:10px;
    max-width:400px;
    margin:auto;
  }

  /* --- Estilos comunes para inputs, textarea y botones --- */
  input, textarea, button { 
    width:100%;
    padding:10px;
    margin:8px 0;
    border:1px solid #ccc;
    border-radius:5px;
  }

  /* --- Estilo del bot칩n principal --- */
  button { 
    background:#25d366;
    color:white;
    border:none;
    cursor:pointer;
    font-size:16px;
  }

  /* --- Efecto al pasar el rat칩n por el bot칩n --- */
  button:hover { 
    background:#1ebc59;
  }

  /* --- Mensaje de error --- */
  .error { 
    color:red;
    font-size:14px;
    display:none;
  }

  /* --- Campos del Kit Digital (ocultos al inicio) --- */
  .kitCampos { 
    display:none; 
    margin-top:10px; 
  }

  /* --- Grupo de botones tipo radio --- */
  .radioGroup { 
    display:flex;
    gap:20px;
    margin-top:5px;
  }

  /* --- T칤tulo del bloque N춿 EXPEDIENTE --- */
  .kitTitulo {
    font-weight: bold;
    text-align: center;
    margin-bottom: 8px;
    color: #333;
  }

  /* --- Contenedor de los tres inputs del expediente --- */
  .kitInputs {
    display: flex;
    gap: 10px;
    justify-content: space-between;
  }

  /* --- Estilo individual de los inputs del expediente --- */
  .kitInputs input {
    text-align: center;
    border:1px solid #aaa;
  }

  /* --- Primer y segundo input m치s estrechos --- */
  .kitInputs input:nth-child(1),
  .kitInputs input:nth-child(2) {
    width: 25%;
  }

  /* --- Tercer input m치s largo --- */
  .kitInputs input:nth-child(3) {
    width: 45%;
  }

  /* --- Grupo del DNI (dos inputs) --- */
  .dniGroup {
    display: flex;
    gap: 10px;
    justify-content: left;
  }

  .dniGroup input {
    width: 45px;
    text-align: center;
  }
</style>
</head>
<body>

<!-- T칤tulo del formulario -->
<h2>Formulario presupuesto</h2>

<!-- Inicio del formulario -->
<form id="whatsappForm">

  <!-- Campo de nombre -->
  <label>Nombre:</label>
  <input type="text" id="nombre" placeholder="Tu nombre">

  <!-- Campo de apellidos -->
  <label>Apellidos:</label>
  <input type="text" id="apellidos" placeholder="Tus apellidos">

  <!-- Campo de DNI -->
  <label>DNI:</label>
  <div class="dniGroup">
    <input type="text" id="dniNumero" maxlength="8" pattern="\d{8}" placeholder="12345678">
    <input type="text" id="dniLetra" maxlength="1" pattern="[A-Za-z]" placeholder="A">
  </div>

  <!-- Campo de direcci칩n -->
  <label>Direcci칩n:</label>
  <input type="text" id="direccion" placeholder="Tu direcci칩n">

  <!-- Campo de correo electr칩nico -->
  <label>Email:</label>
  <input type="email" id="email" placeholder="tu@email.com">

  <!-- Campo de tel칠fono -->
  <label>Tel칠fono:</label>
  <input type="tel" id="telefono" placeholder="34 600 000 000">

  <!-- Campo de concepto -->
  <label>Concepto (m치x. 150 palabras):</label>
  <textarea id="concepto" maxlength="150" placeholder="Escribe aqu칤 tu mensaje..."></textarea>

  <!-- Pregunta sobre el Kit Digital -->
  <label>쯂it Digital?</label>
  <div class="radioGroup">
    <label><input type="radio" name="kitDigital" value="si" onclick="mostrarCamposKit(true)"> S칤</label>
    <label><input type="radio" name="kitDigital" value="no" onclick="mostrarCamposKit(false)"> No</label>
  </div>

  <!-- Bloque de campos del Kit Digital -->
  <div class="kitCampos" id="camposKit">
    <div class="kitTitulo">N춿 EXPEDIENTE</div>
    <div class="kitInputs">
      <input type="text" id="codigo1" maxlength="4" pattern="\d{4}" placeholder="1234">
      <input type="text" id="codigo2" maxlength="4" pattern="[A-Za-z]{1}\d{3}" placeholder="A123">
      <input type="text" id="codigo3" maxlength="8" pattern="\d{8}" placeholder="12345678">
    </div>
  </div>

  <!-- Mensaje de error -->
  <p class="error" id="errorMsg">丘멆잺 Debe llenar todos los campos antes de enviar.</p>

  <!-- Botones -->
  <button type="button" onclick="enviarWhatsApp()">Enviar por WhatsApp</button>
  <button type="button" style="background:#007bff;" onclick="compartirFormulario()">Compartir formulario vac칤o</button>

</form>

<script>
/* --- FUNCI칍N para mostrar u ocultar los campos del Kit Digital --- */
function mostrarCamposKit(mostrar) {
  const camposKit = document.getElementById("camposKit");
  const cod1 = document.getElementById("codigo1");
  const cod2 = document.getElementById("codigo2");
  const cod3 = document.getElementById("codigo3");

  if (mostrar) {
    camposKit.style.display = "block";
    cod1.required = true;
    cod2.required = true;
    cod3.required = true;
  } else {
    camposKit.style.display = "none";
    cod1.required = cod2.required = cod3.required = false;
    cod1.value = cod2.value = cod3.value = "";
  }
}

/* --- FUNCI칍N para enviar los datos por WhatsApp --- */
function enviarWhatsApp() {
  const nombre = document.getElementById("nombre").value.trim();
  const apellidos = document.getElementById("apellidos").value.trim();
  const dniNumero = document.getElementById("dniNumero").value.trim();
  const dniLetra = document.getElementById("dniLetra").value.trim().toUpperCase();
  const direccion = document.getElementById("direccion").value.trim();
  const email = document.getElementById("email").value.trim();
  const telefono = document.getElementById("telefono").value.trim();
  const concepto = document.getElementById("concepto").value.trim();
  const kitSi = document.querySelector('input[name="kitDigital"][value="si"]').checked;
  const kitNo = document.querySelector('input[name="kitDigital"][value="no"]').checked;
  const codigo1 = document.getElementById("codigo1").value.trim();
  const codigo2 = document.getElementById("codigo2").value.trim();
  const codigo3 = document.getElementById("codigo3").value.trim();
  const errorMsg = document.getElementById("errorMsg");

  // Validaciones b치sicas
  if (!nombre || !apellidos || !direccion || !email || !telefono || !concepto || (!kitSi && !kitNo)) {
    errorMsg.textContent = "丘멆잺 Debe llenar todos los campos antes de enviar.";
    errorMsg.style.display = "block";
    return;
  }

  // Validar DNI
  if (!/^\d{8}$/.test(dniNumero) || !/^[A-Za-z]$/.test(dniLetra)) {
    errorMsg.textContent = "丘멆잺 Introduce un DNI v치lido (8 n칰meros y 1 letra).";
    errorMsg.style.display = "block";
    return;
  }

  // Validar Kit Digital si se eligi칩 "S칤"
  if (kitSi) {
    const val1 = /^\d{4}$/.test(codigo1);
    const val2 = /^[A-Za-z]{1}\d{3}$/.test(codigo2);
    const val3 = /^\d{8}$/.test(codigo3);
    if (!val1 || !val2 || !val3) {
      errorMsg.textContent = "丘멆잺 Verifica los c칩digos del Kit Digital.";
      errorMsg.style.display = "block";
      return;
    }
  }

  errorMsg.style.display = "none"; // ocultar mensaje de error si todo est치 correcto

  const numeroDestino = "34633142277"; // <-- Cambia este n칰mero si lo deseas

  let mensaje = `Nuevo formulario de contacto:
游녻 Nombre: ${nombre} ${apellidos}
游 DNI: ${dniNumero}${dniLetra}
游 Direcci칩n: ${direccion}
游닎 Email: ${email}
游 Tel칠fono: ${telefono}
游닇 Concepto: ${concepto}
游눹 Kit Digital: ${kitSi ? "S칤" : "No"}`;

  if (kitSi) {
    mensaje += `\n游댝 C칩digo 1: ${codigo1}\n游 C칩digo 2: ${codigo2}\n游 C칩digo 3: ${codigo3}`;
  }

  const url = `https://wa.me/${numeroDestino}?text=${encodeURIComponent(mensaje)}`;
  window.open(url, "_blank");
}

/* --- FUNCI칍N para compartir el formulario vac칤o --- */
function compartirFormulario() {
  const enlace = window.location.href.split('?')[0]; // Usa autom치ticamente el dominio actual (local o p칰blico)
  const texto = `游닇 Rellena el formulario para solicitar tu presupuesto:\n${enlace}`;
  const url = `https://wa.me/?text=${encodeURIComponent(texto)}`;
  window.open(url, "_blank");
}
</script>

</body>
</html>
